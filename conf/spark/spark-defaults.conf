# Spark Configuration for S3A and Hive Integration

# S3A / MinIO Configuration
spark.hadoop.fs.s3a.endpoint                    http://minio:9000
spark.hadoop.fs.s3a.access.key                  admin
spark.hadoop.fs.s3a.secret.key                  admin123
spark.hadoop.fs.s3a.path.style.access           true
spark.hadoop.fs.s3a.impl                        org.apache.hadoop.fs.s3a.S3AFileSystem
spark.hadoop.fs.s3a.connection.ssl.enabled      false
spark.hadoop.fs.s3a.aws.credentials.provider    org.apache.hadoop.fs.s3a.SimpleAWSCredentialsProvider

# Hive Configuration
spark.sql.warehouse.dir                         /tmp/spark-warehouse
spark.sql.hive.metastore.version               3.1.3
spark.sql.hive.metastore.jars                  /opt/spark/jars/*
spark.sql.catalogImplementation                 hive

# Performance tuning
spark.sql.adaptive.enabled                      true
spark.sql.adaptive.coalescePartitions.enabled   true
spark.serializer                                org.apache.spark.serializer.KryoSerializer

# S3A Performance optimizations
spark.hadoop.fs.s3a.connection.maximum          100
spark.hadoop.fs.s3a.threads.max                 20
spark.hadoop.fs.s3a.connection.establish.timeout 5000
spark.hadoop.fs.s3a.connection.timeout          200000
spark.hadoop.fs.s3a.fast.upload                 true
